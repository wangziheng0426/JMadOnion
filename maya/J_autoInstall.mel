//  @package public
//
//  @brief   ��װ����
//  @author ��
//  @version 1.0
//  @date   18:18 2024/1/21
//  History:  
//
global proc J_autoInstall()
{
    string $pathStr= `whatIs J_autoInstall`;
    int $k=sizeBytes($pathStr);
    $pathStr=`substring $pathStr 25 $k`;
    $pathStr=dirname($pathStr);
    print $pathStr;
    string $runPy="";
    // $runPy+="import maya.mel as mel \nimport maya.cmds as cmds\nimport os,stat\n";
    // $runPy+="pathStr='"+$pathStr+"'\n";
    // $runPy+="plugName=os.path.dirname(pathStr).split('/')[-1]\n";
    // $runPy+="modStr='+ '+plugName +' 1.0 '+pathStr+'\\nPYTHONPATH +:= \\nMAYA_SCRIPT_PATH +:='\n";
    // $runPy+="modFilePath=os.path.dirname(os.path.dirname(os.path.dirname(cmds.internalVar(userScriptDir=True).replace('zh_CN/',''))))+'/modules/'+plugName+'.mod'\n";
    // $runPy+="if not os.path.exists(os.path.dirname(modFilePath)):os.makedirs(os.path.dirname(modFilePath))\n";
    // $runPy+="if os.path.exists(modFilePath):\n";
    // $runPy+="    if os.stat(modFilePath).st_mode==33060:\n";
    // $runPy+="        os.chmod(modFilePath,stat.S_IWRITE) \n";
    // $runPy+="    os.remove(modFilePath)\n";
    // $runPy+="modFile=open(modFilePath,'w')\n";
    // $runPy+="modFile.write(modStr )\nmodFile.close()\n";
    // $runPy+="os.chmod(modFilePath,stat.S_IREAD) \n";
    // $runPy+="userSetupFilePath=os.path.dirname(os.path.dirname(os.path.dirname(cmds.internalVar(userScriptDir=True).replace('zh_CN/',''))))+'/scripts/userSetup.mel'\n";
    // $runPy+="userSetupFileStr=''\n";
    // $runPy+="if os.path.exists(userSetupFilePath):\n";
    // $runPy+="    userSetupFile=open(userSetupFilePath,'r')\n";
    // $runPy+="    userSetupFileStr=userSetupFile.read()\n";
    // $runPy+="    userSetupFile.close()\n";
    // $runPy+="if 'J_madOnion' not in userSetupFileStr:\n";
    // $runPy+="    userSetupFile=open(userSetupFilePath,'w')\n";
    // $runPy+="    userSetupFileStr=userSetupFileStr+'\\nJ_madOnion ;'\n";
    // $runPy+="    userSetupFile.write(userSetupFileStr )\n    userSetupFile.close()\n";

    $pathStr="source \""+$pathStr+"/J_madOnion.mel\"";
    print $pathStr;

    catch(`eval $pathStr`);
    J_madOnion ;
    //python($runPy);
}

J_autoInstall();